module.exports=[9019,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(48441),e=a.i(89516),f=a.i(87532),g=a.i(15618),h=a.i(70106);let i=(0,h.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),j=(0,h.default)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),k=(0,h.default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var l=a.i(73570);let m=(0,h.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),n=(0,h.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),o=(0,h.default)("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),p=(0,h.default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var q=a.i(24987);let r=(0,h.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var s=a.i(73336);function t(){let{t:a,language:h}=(0,e.useSettings)(),t="ar"===h,[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(!0),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)("grid"),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)([]),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)(null),[Q,R]=(0,c.useState)({targetTemp:4,tempMin:2,tempMax:8}),[S,T]=(0,c.useState)(!1),[U,V]=(0,c.useState)({deviceId:"",type:"FRIDGE",facilityId:"",targetTemp:4,tempMin:2,tempMax:8}),[W,X]=(0,c.useState)(""),Y=async()=>{try{let a=await fetch("/api/auth/me");if(a.ok){let b=await a.json();v(b.user)}let[b,c]=await Promise.all([fetch("/api/dashboard/devices?limit=100"),fetch("/api/devices")]);if(b.ok){let a=await b.json();x(a.data)}if(c.ok){let a=await c.json();z(a.data)}}catch(a){console.error("Failed to fetch data:",a)}finally{B(!1)}};(0,c.useEffect)(()=>{Y()},[]);let Z=async a=>{if(confirm("Turn this device back to Healthy status?"))try{(await fetch(`/api/devices/${a}/reset`,{method:"POST"})).ok&&Y()}catch(a){console.error("Reset failed:",a)}},$=async a=>{a.preventDefault(),X(""),N(!0);try{let a=await fetch("/api/devices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(U)}),b=await a.json();b.success?(T(!1),V({deviceId:"",type:"FRIDGE",facilityId:"",targetTemp:4,tempMin:2,tempMax:8}),Y()):X(b.error||"Failed to register device")}catch(a){X("Network error occurred")}finally{N(!1)}},_=async a=>{H(w.find(b=>b.id===a)),J(!0);try{let b=await fetch(`/api/devices/${a}/readings?limit=50`),c=await b.json();c.success&&L(c.data)}catch(a){console.error("Logs fetch failed:",a)}},aa=w.filter(a=>a.deviceId.toLowerCase().includes(C.toLowerCase())||a.facility?.name?.toLowerCase().includes(C.toLowerCase()));return A&&!u?(0,b.jsx)("div",{className:"min-h-screen bg-[var(--bg-body)]"}):(0,b.jsxs)(d.AppShell,{user:u,children:[(0,b.jsxs)(s.Stack,{gap:8,className:"pb-32",children:[(0,b.jsxs)("header",{className:"flex flex-col gap-2 mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-[var(--soft-text-main)]",children:"Fleet Intelligence"}),(0,b.jsxs)("p",{className:"text-[var(--soft-text-sub)]",children:["Manage ",w.length," active hardware nodes."]})]}),(0,b.jsx)("div",{className:"card-soft",children:(0,b.jsxs)("div",{className:"card-soft-inner min-h-[500px] flex flex-col",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"relative flex-1 min-w-[300px]",children:[(0,b.jsx)(f.Search,{className:`absolute top-1/2 -translate-y-1/2 text-[var(--soft-text-sub)] ${t?"right-4":"left-4"}`,size:18}),(0,b.jsx)("input",{type:"text",placeholder:a("searchDevices"),className:`w-full h-12 bg-white rounded-[var(--radius-btn)] border border-transparent focus:border-[var(--soft-primary)] outline-none text-[var(--soft-text-main)] transition-colors shadow-sm ${t?"pr-12 pl-4":"pl-12 pr-4"}`,value:C,onChange:a=>D(a.target.value)})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"bg-white p-1 rounded-[var(--radius-btn)] flex items-center shadow-sm h-12",children:[(0,b.jsx)("button",{onClick:()=>F("list"),className:`p-2.5 rounded-[4px] transition-all ${"list"===E?"bg-[var(--soft-bg-inner)] text-[var(--soft-text-main)]":"text-[var(--soft-text-sub)] hover:text-[var(--soft-text-main)]"}`,children:(0,b.jsx)(i,{size:20})}),(0,b.jsx)("button",{onClick:()=>F("grid"),className:`p-2.5 rounded-[4px] transition-all ${"grid"===E?"bg-[var(--soft-bg-inner)] text-[var(--soft-text-main)]":"text-[var(--soft-text-sub)] hover:text-[var(--soft-text-main)]"}`,children:(0,b.jsx)(j,{size:20})})]}),(0,b.jsxs)("button",{onClick:()=>T(!0),className:"btn-soft px-6 h-12",children:[(0,b.jsx)(g.Plus,{size:18}),(0,b.jsx)("span",{className:"text-sm font-semibold",children:a("addDevice")})]})]})]}),(0,b.jsx)("div",{className:"flex-1",children:"list"===E?(0,b.jsxs)("div",{className:"bg-white rounded-[var(--radius-inner)] shadow-sm overflow-hidden",children:[(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-4 px-6 py-4 bg-[var(--soft-bg-inner)] text-xs font-bold text-[var(--soft-text-sub)] uppercase",children:[(0,b.jsx)("div",{className:"col-span-4",children:a("device")}),(0,b.jsx)("div",{className:"col-span-3",children:a("location")}),(0,b.jsx)("div",{className:"col-span-2 text-center",children:a("temp")}),(0,b.jsx)("div",{className:"col-span-2 text-center",children:a("status")}),(0,b.jsx)("div",{className:"col-span-1"})]}),(0,b.jsx)("div",{className:"divide-y divide-[var(--soft-bg-inner)]",children:aa.map(c=>(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center px-6 py-5 hover:bg-[var(--soft-bg-inner)]/30 transition-colors group",children:[(0,b.jsxs)("div",{className:"col-span-4 flex items-center gap-4",children:[(0,b.jsx)("div",{className:"icon-soft !w-10 !h-10 !bg-[var(--soft-bg-inner)] !text-[var(--soft-primary)]",children:(0,b.jsx)(o,{size:18})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-bold text-[var(--soft-text-main)] text-sm font-mono",children:c.deviceId}),(0,b.jsx)("p",{className:"text-[10px] uppercase font-bold text-[var(--soft-text-sub)]",children:c.type})]})]}),(0,b.jsxs)("div",{className:"col-span-3",children:[(0,b.jsx)("p",{className:"font-bold text-[var(--soft-text-main)] text-sm truncate",children:c.facility?.name}),(0,b.jsxs)("div",{className:"flex items-center gap-1 text-[var(--soft-text-sub)] mt-0.5",children:[(0,b.jsx)(q.MapPin,{size:10}),(0,b.jsx)("span",{className:"text-[10px]",children:c.wilaya?.name})]})]}),(0,b.jsx)("div",{className:"col-span-2 text-center",children:(0,b.jsxs)("span",{className:`text-lg font-bold tabular-nums ${c.lastTempValue>c.tempMax||c.lastTempValue<c.tempMin?"text-red-500":"text-[var(--soft-text-main)]"}`,children:[c.lastTempValue?.toFixed(1),"°"]})}),(0,b.jsx)("div",{className:"col-span-2 flex justify-center",children:"NOT_HEALTHY"===c.healthStatus?(0,b.jsxs)("button",{onClick:()=>Z(c.id),className:"badge-soft !bg-red-50 !text-red-600 flex items-center gap-1 cursor-pointer hover:bg-red-100",children:[(0,b.jsx)(l.AlertTriangle,{size:10}),a("critical")]}):(0,b.jsxs)("span",{className:"badge-soft !bg-emerald-50 !text-emerald-600 flex items-center gap-1",children:[(0,b.jsx)(m,{size:10}),a("healthy")]})}),(0,b.jsx)("div",{className:"col-span-1 flex justify-end",children:(0,b.jsx)("button",{onClick:()=>_(c.id),className:"w-8 h-8 rounded-full flex items-center justify-center text-[var(--soft-text-sub)] hover:text-[var(--soft-primary)] hover:bg-[var(--soft-bg-inner)] transition-colors",children:(0,b.jsx)(k,{size:16})})})]},c.id))})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:aa.map(c=>(0,b.jsx)("div",{className:`bg-white rounded-[16px] p-2 hover:shadow-md transition-all group ${"NOT_HEALTHY"===c.healthStatus?"shadow-[0_0_0_2px_rgba(239,68,68,0.2)]":"shadow-sm"}`,children:(0,b.jsxs)("div",{className:"bg-[var(--soft-bg-inner)] rounded-[12px] p-5 h-full relative overflow-hidden",children:[(0,b.jsx)("div",{className:`absolute top-4 right-4 w-2 h-2 rounded-full ${"NOT_HEALTHY"===c.healthStatus?"bg-red-500 animate-pulse":"bg-emerald-500"}`}),(0,b.jsxs)("div",{className:"flex flex-col h-full justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-white flex items-center justify-center text-[var(--soft-primary)] shadow-sm",children:(0,b.jsx)(o,{size:14})}),(0,b.jsx)("span",{className:"font-mono font-bold text-[var(--soft-text-main)] text-sm",children:c.deviceId})]}),(0,b.jsxs)("p",{className:"text-xs text-[var(--soft-text-sub)] flex items-center gap-1 truncate",children:[(0,b.jsx)(q.MapPin,{size:10}),c.facility?.name]})]}),(0,b.jsxs)("div",{className:"flex items-end justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] uppercase font-bold text-[var(--soft-text-sub)] tracking-wider",children:a("current")}),(0,b.jsxs)("p",{className:`text-3xl font-bold leading-none ${c.lastTempValue>c.tempMax||c.lastTempValue<c.tempMin?"text-red-500":"text-[var(--soft-text-main)]"}`,children:[c.lastTempValue?.toFixed(1),"°"]})]}),(0,b.jsx)("button",{onClick:()=>_(c.id),className:"btn-soft !px-3 !py-1.5 !text-xs !bg-white !text-[var(--soft-primary)] hover:!bg-[var(--soft-primary)] hover:!text-white shadow-sm",children:a("logs")})]})]})]})},c.id))})})]})})]}),S&&(0,b.jsx)("div",{className:"fixed inset-0 z-[4000] flex items-center justify-center bg-black/30 backdrop-blur-md p-4 transition-all duration-300",children:(0,b.jsxs)("div",{className:"bg-white rounded-[32px] shadow-2xl w-full max-w-3xl overflow-hidden flex flex-col transform transition-all scale-100",children:[(0,b.jsxs)("div",{className:"px-16 py-8 border-b border-slate-100 flex items-center justify-between bg-slate-50/50",children:[(0,b.jsx)("h3",{className:"font-bold text-[var(--soft-text-main)] text-2xl !pl-6",children:a("registerNewNode")}),(0,b.jsx)("button",{onClick:()=>T(!1),className:"w-10 h-10 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center text-slate-400 hover:text-red-500 transition-all",children:(0,b.jsx)(n,{size:24})})]}),(0,b.jsxs)("form",{onSubmit:$,className:"p-16 flex flex-col gap-10",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("label",{className:"text-sm font-bold text-[var(--soft-text-sub)] uppercase tracking-wider pl-6",children:a("identity")}),(0,b.jsx)("input",{required:!0,type:"text",placeholder:a("serialNumber"),className:"w-full h-16 rounded-[20px] bg-[var(--soft-bg-inner)] border-none !pl-10 !pr-6 font-mono text-lg focus:ring-4 ring-[var(--soft-primary)]/20 transition-all outline-none text-[var(--soft-text-main)] placeholder:text-slate-300",value:U.deviceId,onChange:a=>V({...U,deviceId:a.target.value.toUpperCase()})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("label",{className:"text-sm font-bold text-[var(--soft-text-sub)] uppercase tracking-wider pl-6",children:a("type")}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("select",{className:"appearance-none w-full h-16 rounded-[20px] bg-[var(--soft-bg-inner)] border-none !pl-10 !pr-10 text-base font-bold text-[var(--soft-text-main)] outline-none focus:ring-4 ring-[var(--soft-primary)]/20 transition-all cursor-pointer",value:U.type,onChange:a=>V({...U,type:a.target.value}),children:[(0,b.jsx)("option",{value:"FRIDGE",children:a("fridge")}),(0,b.jsx)("option",{value:"FREEZER",children:a("freezer")})]}),(0,b.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-6 text-[var(--soft-text-sub)]",children:(0,b.jsx)(r,{size:20})})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("label",{className:"text-sm font-bold text-[var(--soft-text-sub)] uppercase tracking-wider pl-6",children:a("location")}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("select",{required:!0,className:"appearance-none w-full h-16 rounded-[20px] bg-[var(--soft-bg-inner)] border-none !pl-10 !pr-10 text-base font-bold text-[var(--soft-text-main)] outline-none focus:ring-4 ring-[var(--soft-primary)]/20 transition-all cursor-pointer",value:U.facilityId,onChange:a=>V({...U,facilityId:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:a("select")}),y.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]}),(0,b.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-6 text-[var(--soft-text-sub)]",children:(0,b.jsx)(r,{size:20})})]})]})]}),(0,b.jsxs)("div",{className:"p-8 bg-[var(--soft-bg-inner)] rounded-[24px] space-y-6",children:[(0,b.jsxs)("p",{className:"text-sm font-bold text-[var(--soft-primary)] uppercase flex items-center gap-2 mb-2 pl-6",children:[(0,b.jsx)(p,{size:18})," ",a("parameters")]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"text-center space-y-2",children:[(0,b.jsx)("label",{className:"text-xs font-bold text-slate-400 block tracking-wider",children:a("target")}),(0,b.jsx)("input",{type:"number",className:"w-full h-14 rounded-[16px] bg-white text-center font-bold text-[var(--soft-text-main)] text-xl shadow-sm focus:ring-4 ring-[var(--soft-primary)]/20 outline-none !px-4",value:U.targetTemp,onChange:a=>V({...U,targetTemp:parseFloat(a.target.value)})})]}),(0,b.jsxs)("div",{className:"text-center space-y-2",children:[(0,b.jsx)("label",{className:"text-xs font-bold text-slate-400 block tracking-wider",children:a("min")}),(0,b.jsx)("input",{type:"number",className:"w-full h-14 rounded-[16px] bg-white text-center font-bold text-[var(--soft-text-main)] text-xl shadow-sm focus:ring-4 ring-[var(--soft-primary)]/20 outline-none !px-4",value:U.tempMin,onChange:a=>V({...U,tempMin:parseFloat(a.target.value)})})]}),(0,b.jsxs)("div",{className:"text-center space-y-2",children:[(0,b.jsx)("label",{className:"text-xs font-bold text-slate-400 block tracking-wider",children:a("max")}),(0,b.jsx)("input",{type:"number",className:"w-full h-14 rounded-[16px] bg-white text-center font-bold text-[var(--soft-text-main)] text-xl shadow-sm focus:ring-4 ring-[var(--soft-primary)]/20 outline-none !px-4",value:U.tempMax,onChange:a=>V({...U,tempMax:parseFloat(a.target.value)})})]})]})]}),(0,b.jsx)("button",{type:"submit",className:"btn-soft w-full h-16 mt-4 text-lg font-bold shadow-xl shadow-indigo-200/50 hover:shadow-indigo-300 hover:-translate-y-1 transition-all",children:a("addDevice")})]})]})})]})}a.s(["default",()=>t],9019)}];

//# sourceMappingURL=src_app_devices_page_tsx_25a66898._.js.map